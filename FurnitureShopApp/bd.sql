-- Таблица типов продукции
CREATE TABLE ProductTypes (
    ProductTypeId INT PRIMARY KEY IDENTITY(1,1),
    TypeName NVARCHAR(100) NOT NULL,
    TypeCoefficient DECIMAL(5,2) NOT NULL
);

-- Таблица материалов
CREATE TABLE Materials (
    MaterialId INT PRIMARY KEY IDENTITY(1,1),
    MaterialTypeId INT NOT NULL,
    MaterialName NVARCHAR(100) NOT NULL,
    PricePerUnit DECIMAL(10,2) NOT NULL,
    Unit NVARCHAR(20) NOT NULL,
    PackageQuantity INT NOT NULL,
    StockQuantity INT NOT NULL,
    MinimumQuantity INT NOT NULL,
    FOREIGN KEY (MaterialTypeId) REFERENCES MaterialTypes(MaterialTypeId)
);

-- Таблица продукции
CREATE TABLE Products (
    ProductId INT PRIMARY KEY IDENTITY(1,1),
    ProductTypeId INT NOT NULL,
    ProductName NVARCHAR(100) NOT NULL,
    Article NVARCHAR(50) NOT NULL,
    MinCostForPartner DECIMAL(10,2) NOT NULL,
    MainMaterial NVARCHAR(100),
    FOREIGN KEY (ProductTypeId) REFERENCES ProductTypes(ProductTypeId)
);

-- Таблица связи продукции с материалами
CREATE TABLE ProductMaterials (
    ProductMaterialId INT PRIMARY KEY IDENTITY(1,1),
    ProductId INT NOT NULL,
    MaterialId INT NOT NULL,
    MaterialQuantity DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (ProductId) REFERENCES Products(ProductId),
    FOREIGN KEY (MaterialId) REFERENCES Materials(MaterialId)
);

-- Заполнение таблицы типов материалов
INSERT INTO MaterialTypes (MaterialName, WastagePercentage) VALUES
('Дерево', 0.0055),
('Древесная плита', 0.0030),
('Текстиль', 0.0015),
('Стекло', 0.0045),
('Металл', 0.0010),
('Пластик', 0.0005);

-- Заполнение таблицы типов продукции
INSERT INTO ProductTypes (TypeName, TypeCoefficient) VALUES
('Кресла', 1.95),
('Полки', 2.50),
('Стеллажи', 4.35),
('Столы', 5.50),
('Тумбы', 7.60),
('Шкафы', 6.72);

-- Заполнение таблицы материалов
INSERT INTO Materials (MaterialTypeId, MaterialName, PricePerUnit, Unit, PackageQuantity, StockQuantity, MinimumQuantity) VALUES
(1, 'Цельный массив дерева Дуб 1000х600 мм', 7450.00, 'м²', 7, 1500, 500),
(1, 'Клееный массив дерева Дуб 1000х600 мм', 4520.00, 'м²', 7, 300, 500),
(1, 'Шпон облицовочный Дуб натуральный 2750х480 мм', 2500.00, 'м²', 19, 2000, 1500),
(2, 'Фанера 2200х1000 мм', 2245.00, 'м²', 52, 450, 1000),
(2, 'ДСП 2750х1830 мм', 529.60, 'м²', 181, 1010, 1200),
(2, 'МДФ 2070х1400 мм', 417.24, 'м²', 87, 1550, 1000),
(2, 'ДВП 2440х2050 мм', 187.00, 'м²', 190, 1310, 1000),
(2, 'ХДФ 2800x2070 мм', 370.96, 'м²', 90, 1400, 1200),
(3, 'Экокожа 140 см', 1600.00, 'пог.м', 100, 1200, 1500),
(3, 'Велюр 140 см', 1300.00, 'пог.м', 100, 1300, 1500),
(3, 'Шенилл 140 см', 620.00, 'пог.м', 100, 950, 1500),
(3, 'Рогожка 140 см', 720.00, 'пог.м', 100, 960, 1500),
(4, 'Закаленное стекло 2600х1800 мм', 1148.00, 'м²', 196, 1000, 500),
(5, 'Металлокаркас для стула', 1100.00, 'шт', 5, 300, 250),
(5, 'Металлокаркас каркас из профиля с траверсами для стола', 6700.00, 'шт', 1, 100, 100),
(6, 'Колесо для мебели поворотное', 10.59, 'шт', 500, 1500, 1000),
(5, 'Газ-лифт', 730.00, 'шт', 5, 500, 250),
(5, 'Металлическая крестовина для офисных кресел', 2700.00, 'шт', 5, 500, 250),
(6, 'Пластиковый комплект для стула', 900.00, 'шт', 100, 300, 250),
(6, 'Кромка ПВХ', 35.80, 'м', 100, 1500, 1000);

-- Заполнение таблицы продукции
INSERT INTO Products (ProductTypeId, ProductName, Article, MinCostForPartner, MainMaterial) VALUES
(1, 'Кресло детское цвет Белый и Розовый', '3028272', 15324.99, 'Текстиль'),
(1, 'Кресло офисное цвет Черный', '3018556', 21443.99, 'Текстиль'),
(1, 'Кресло эргономичное цвет Темно-коричневый', '3549922', 24760.00, 'Текстиль'),
(2, 'Полка настольная', '7028048', 2670.89, 'Древесная плита'),
(3, 'Стеллаж для документов цвет Дуб светлый 854х445х2105 мм', '5759324', 24899.00, 'Дерево'),
(3, 'Стеллаж цвет Белый с ящиками 854х445х2105 мм', '5259474', 16150.00, 'Дерево'),
(3, 'Стеллаж цвет Орех 400х370х2000 мм', '5118827', 2860.00, 'Древесная плита'),
(4, 'Стол для ноутбука на металлокаркасе 800х600х123 мм', '1029784', 14690.00, 'Древесная плита'),
(4, 'Стол компьютерный 700х600х500 мм', '1028248', 4105.89, 'Древесная плита'),
(4, 'Стол компьютерный на металлокаркасе 1400х600х750 мм', '1130981', 13899.00, 'Древесная плита'),
(4, 'Стол письменный 1100x750x600 мм', '1188827', 5148.00, 'Древесная плита'),
(4, 'Стол письменный с тумбочкой 4 ящика 1100x750x600 мм', '1029272', 15325.00, 'Древесная плита'),
(4, 'Стол руководителя письменный цвет Венге 1600x800x764 мм', '1016662', 43500.90, 'Дерево'),
(4, 'Стол руководителя письменный цвет Орех темный 2300x1000x750 мм', '1658953', 132500.00, 'Дерево'),
(5, 'Тумба выкатная 3 ящика', '6033136', 3750.00, 'Древесная плита'),
(5, 'Тумба офисная для оргтехники', '6115947', 2450.00, 'Дерево'),
(3, 'Узкий пенал стеллаж 5 полок цвет Орех 364х326x2000 мм', '5559898', 8348.00, 'Древесная плита'),
(6, 'Шкаф для книг 800x420x2000 мм', '4159043', 23390.99, 'Дерево'),
(6, 'Шкаф для одежды цвет Венге 602x420x2000 мм', '4758375', 12035.00, 'Древесная плита'),
(6, 'Шкаф-витрина 2 ящика 800x420x2000 мм', '4588376', 31991.00, 'Дерево');

-- Заполнение таблицы связи продукции с материалами
INSERT INTO ProductMaterials (ProductId, MaterialId, MaterialQuantity) VALUES
-- Кресло детское цвет Белый и Розовый (ProductId = 1)
(1, 4, 0.85),  -- Фанера 2200х1000 мм
(1, 10, 1.5),  -- Велюр 140 см
(1, 11, 1.5),  -- Шенилл 140 см
(1, 12, 1.5),  -- Рогожка 140 см
(1, 13, 1),    -- Металлокаркас для стула
(1, 15, 5),    -- Колесо для мебели поворотное
(1, 16, 1),    -- Газ-лифт
(1, 17, 1),    -- Металлическая крестовина для офисных кресел
(1, 18, 1),    -- Пластиковый комплект для стула

-- Кресло офисное цвет Черный (ProductId = 2)
(2, 4, 1.25),  -- Фанера 2200х1000 мм
(2, 9, 3.04),  -- Экокожа 140 см
(2, 11, 1.5),  -- Шенилл 140 см
(2, 12, 2.5),  -- Рогожка 140 см
(2, 13, 1),    -- Металлокаркас для стула
(2, 15, 5),    -- Колесо для мебели поворотное
(2, 16, 1),    -- Газ-лифт
(2, 17, 1),    -- Металлическая крестовина для офисных кресел
(2, 18, 1),    -- Пластиковый комплект для стула

-- Кресло эргономичное цвет Темно-коричневый (ProductId = 3)
(3, 4, 1.85),  -- Фанера 2200х1000 мм
(3, 9, 4.22),  -- Экокожа 140 см
(3, 10, 1.5),  -- Велюр 140 см
(3, 13, 1),    -- Металлокаркас для стула
(3, 15, 5),    -- Колесо для мебели поворотное
(3, 16, 1),    -- Газ-лифт
(3, 17, 1),    -- Металлическая крестовина для офисных кресел
(3, 18, 1),    -- Пластиковый комплект для стула

-- Полка настольная (ProductId = 4)
(4, 5, 3.33),  -- ДСП 2750х1830 мм
(4, 19, 6),    -- Кромка ПВХ

-- Стеллаж для документов цвет Дуб светлый 854х445х2105 мм (ProductId = 5)
(5, 2, 2.9),   -- Клееный массив дерева Дуб 1000х600 мм
(5, 3, 1.7),   -- Шпон облицовочный Дуб натуральный 2750х480 мм
(5, 6, 2.7),   -- МДФ 2070х1400 мм
(5, 8, 1.8),   -- ХДФ 2800x2070 мм

-- Стеллаж цвет Белый с ящиками 854х445х2105 мм (ProductId = 6)
(6, 2, 1.7),   -- Клееный массив дерева Дуб 1000х600 мм
(6, 3, 1.6),   -- Шпон облицовочный Дуб натуральный 2750х480 мм
(6, 8, 1.8),   -- ХДФ 2800x2070 мм

-- Стеллаж цвет Орех 400х370х2000 мм (ProductId = 7)
(7, 5, 2),     -- ДСП 2750х1830 мм
(7, 7, 0.8),   -- ДВП 2440х2050 мм
(7, 19, 7),    -- Кромка ПВХ

-- Стол для ноутбука на металлокаркасе 800х600х123 мм (ProductId = 8)
(8, 6, 5.95),  -- МДФ 2070х1400 мм
(8, 14, 1),    -- Металлокаркас каркас из профиля с траверсами для стола

-- Стол компьютерный 700х600х500 мм (ProductId = 9)
(9, 5, 4.3),   -- ДСП 2750х1830 мм
(9, 19, 8.6),  -- Кромка ПВХ

-- Стол компьютерный на металлокаркасе 1400х600х750 мм (ProductId = 10)
(10, 6, 7.65), -- МДФ 2070х1400 мм
(10, 8, 1.05), -- ХДФ 2800x2070 мм
(10, 14, 1),   -- Металлокаркас каркас из профиля с траверсами для стола

-- Стол письменный 1100x750x600 мм (ProductId = 11)
(11, 5, 6.4),  -- ДСП 2750х1830 мм
(11, 19, 6.2), -- Кромка ПВХ

-- Стол письменный с тумбочкой 4 ящика 1100x750x600 мм (ProductId = 12)
(12, 4, 2.55), -- Фанера 2200х1000 мм
(12, 5, 5.2),  -- ДСП 2750х1830 мм
(12, 7, 3.59), -- ДВП 2440х2050 мм
(12, 19, 9.4), -- Кромка ПВХ

-- Стол руководителя письменный цвет Венге 1600x800x764 мм (ProductId = 13)
(13, 1, 3.5),  -- Цельный массив дерева Дуб 1000х600 мм
(13, 3, 1.5),  -- Шпон облицовочный Дуб натуральный 2750х480 мм
(13, 8, 2.1),  -- ХДФ 2800x2070 мм
(13, 4, 0.8),  -- Закаленное стекло 2600х1800 мм

-- Стол руководителя письменный цвет Орех темный 2300x1000x750 мм (ProductId = 14)
(14, 1, 7.7),  -- Цельный массив дерева Дуб 1000х600 мм
(14, 3, 6.5),  -- Шпон облицовочный Дуб натуральный 2750х480 мм
(14, 5, 4.5),  -- ДСП 2750х1830 мм
(14, 6, 5.7),  -- МДФ 2070х1400 мм
(14, 8, 2.3),  -- ХДФ 2800x2070 мм
(14, 9, 1.74), -- Экокожа 140 см

-- Тумба выкатная 3 ящика (ProductId = 15)
(15, 5, 4.2),  -- ДСП 2750х1830 мм
(15, 7, 2.21), -- ДВП 2440х2050 мм
(15, 15, 4),   -- Колесо для мебели поворотное
(15, 19, 6.5), -- Кромка ПВХ

-- Тумба офисная для оргтехники (ProductId = 16)
(16, 2, 0.4),  -- Клееный массив дерева Дуб 1000х600 мм
(16, 15, 4),   -- Колесо для мебели поворотное

-- Узкий пенал стеллаж 5 полок цвет Орех 364х326x2000 мм (ProductId = 17)
(17, 3, 0.7),  -- Шпон облицовочный Дуб натуральный 2750х480 мм
(17, 5, 7.65), -- ДСП 2750х1830 мм
(17, 7, 0.8),  -- ДВП 2440х2050 мм
(17, 19, 6.3), -- Кромка ПВХ

-- Шкаф для книг 800x420x2000 мм (ProductId = 18)
(18, 3, 3.2),  -- Шпон облицовочный Дуб натуральный 2750х480 мм
(18, 4, 3.5),  -- Фанера 2200х1000 мм
(18, 7, 1.6),  -- ДВП 2440х2050 мм
(18, 4, 1.6),  -- Закаленное стекло 2600х1800 мм

-- Шкаф для одежды цвет Венге 602x420x2000 мм (ProductId = 19)
(19, 3, 1.3),  -- Шпон облицовочный Дуб натуральный 2750х480 мм
(19, 5, 8.2),  -- ДСП 2750х1830 мм
(19, 8, 1.3),  -- ХДФ 2800x2070 мм

-- Шкаф-витрина 2 ящика 800x420x2000 мм (ProductId = 20)
(20, 1, 1.8),  -- Цельный массив дерева Дуб 1000х600 мм
(20, 3, 3.5),  -- Шпон облицовочный Дуб натуральный 2750х480 мм
(20, 8, 1.65), -- ХДФ 2800x2070 мм
(20, 4, 1.6);  -- Закаленное стекло 2600х1800 мм